<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Send WhatsApp</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

<style>
    /* Mengurangi ukuran font keseluruhan */
    body {
        font-size: 14px; /* Ukuran font dasar lebih kecil untuk seluruh halaman */
    }

    .logo-container {
        margin-top: 2px;
        margin-bottom: 10px;
        text-align: center;
    }

    .logo-container img {
        max-width: 200px;
    }

    .logo-title {
        font-size: 15px; /* Mengecilkan ukuran font judul */
        font-weight: bold;
        margin-bottom: 5px;
    }

    .logo-subtitle {
        font-family: Arial, sans-serif;
        font-size: 13px; /* Mengecilkan ukuran font subtitle */
        margin-top: 0;
    }

    /* Mengecilkan ukuran font pada form control (input, textarea, select) */
    .form-control, .form-select, .form-label, textarea {
        font-size: 13px; /* Mengecilkan ukuran font pada form control */
        padding: 5px; /* Mengecilkan padding pada input dan textarea */
    }

    /* Mengubah ukuran font untuk label */
    .form-label {
        font-size: 13px; /* Ukuran font lebih kecil untuk label */
    }

    /* Mengatur ukuran font untuk input dan textarea lebih kecil */
    .form-control {
        font-size: 13px;
        padding: 5px; /* Padding lebih kecil untuk input */
    }

    /* Menyesuaikan ukuran font untuk tombol */
    button.btn-primary {
        font-size: 13px; /* Mengecilkan ukuran font pada tombol */
        padding: 5px 10px; /* Mengecilkan padding tombol */
    }

    /* Menyesuaikan lebar form */
    .form-container {
        max-width: 600px; /* Menyesuaikan lebar form */
        margin: 0 auto; /* Menyusun form agar berada di tengah */
    }

    /* Menyesuaikan ukuran gambar thumbnail */
    .img-thumbnail {
        display: block;
        margin: 0 auto;
        width: 150px; /* Menyesuaikan ukuran gambar thumbnail lebih kecil */
        height: auto;
    }

    /* Mengurangi ukuran font untuk tabel */
    table.dataTable thead th {
        font-size: 13px; /* Menyesuaikan ukuran font header tabel */
        background-color: #6c757d;
        color: #ffffff;
        padding: 8px; /* Padding header tabel */
    }

    /* Mengurangi ukuran font untuk konten tabel */
    table.dataTable tbody td {
        font-size: 13px; /* Ukuran font dalam baris tabel */
        padding: 8px; /* Padding pada data tabel */
    }
    .form-group, .form-group .row {
    margin-bottom: 1rem; /* Memberikan jarak antar form group */
}

.form-label {
    margin-bottom: 0.5rem; /* Memberikan jarak antara label dan input */
}

textarea {
    margin-bottom: 1rem; /* Memberikan jarak bawah pada textarea */
}

button.btn-primary {
    margin-top: 1rem; /* Memberikan jarak atas pada tombol */
}
</style>

</head>
<div class="logo-container">
  <nav class="navbar navbar-expand-lg navbar-dark mb-2">
  <div class="container-fluid">
  </div>
  </nav>
  <img src="https://karir-production.nos.jkt-1.neo.id/logos/63/1350563/Logo_Baru_tulisan_putih-01-01.png" alt="Logo Akulaku" class="img-fluid mx-auto d-block">
  <p class="logo-title">Invitation Whatsapp Training</p>
  <p class="logo-subtitle">PT Danamas Insan Kreasi Andalan</p>
  </div>
  <div class="form-container mt-4 mx-auto" style="max-width: 800px;">

  <hr style="border-color: red;">
    <form id="whatsappForm">
    <div class="form-group">
    <div class="row">
    <div class="col">
    <label for="id_lapor" class="form-label">ID Laporan</label>
    <select id="id_lapor" name="id_lapor" class="form-select">
    <option value="">Pilih ID Lapor</option>
    <% idLaporList.forEach(function(id) { %>
    <option value="<%= id %>"><%= id %></option><% }) %>
    </select>
    </div>

    <div class="col">
    <label for="nama_perusahaan" class="form-label">Nama Perusahaan</label>
    <input type="text" id="nama_perusahaan" class="form-control" disabled>
    </div>

    <div class="col">
    <label for="nomor_ponsel" class="form-label">Nomor Ponsel</label>
    <input type="text" id="nomor_ponsel" class="form-control" disabled>
    </div>
    </div>
    </div>


      <div class="form-group">
      <div class="row">
      <div class="col">
      <label for="hari" class="form-label">Hari Tranining</label>
      <input type="text" id="hari" class="form-control" disabled>
      </div>
      <div class="col">
      <label for="tanggal" class="form-label">Tanggal Training</label>
      <input type="text" id="tanggal" class="form-control" disabled>
      </div>
      <div class="col">
      <label for="pukul" class="form-label">Waktu Training</label>
      <input type="text" id="pukul" class="form-control" disabled>
      </div>
      </div>
      </div>


      <div class="form-group">
      <div class="row">
      <div class="col">
      <label for="materi" class="form-label">Materi Training</label>
      <input type="text" id="materi" class="form-control" disabled>
      </div>
      <div class="col">
      <label for="persiapan_training" class="form-label">Persiapan Sebelum Training</label>
      <input type="text" id="persiapan_training" class="form-control" disabled>
      </div>
      </div>
      </div>

      <div class="form-group">
      <label for="detail_isi_pesan" class="form-label">Detail Isi Pesan</label>
      <textarea id="detail_isi_pesan" class="form-control" rows="6" disabled></textarea>
      </div>

      <div class="d-flex justify-content-center">
      <button type="submit" class="btn btn-primary">Kirim WhatsApp</button>
      </div>
    </form>
  </div>

  <!-- Script untuk mengambil data dan kirim pesan -->
  <script>
  $('#id_lapor').on('change', function() {
    const idLapor = $(this).val();
    if (idLapor) {
      $.get(`/getDataByIdLapor?idLapor=${idLapor}`, function(data) {
        $('#nama_perusahaan').val(data.nama_perusahaan);
        $('#nomor_ponsel').val(data.nomor_ponsel);
        $('#tanggal').val(data.tanggal);
        $('#hari').val(data.hari);
        $('#pukul').val(data.pukul);
        $('#materi').val(data.materi);
        $('#persiapan_training').val(data.persiapan_training);
        $('#detail_isi_pesan').val(data.detail_isi_pesan);
      });
    } else {
      // Reset fields if no idLapor selected
      $('#nama_perusahaan').val('');
      $('#nomor_ponsel').val('');
      $('#tanggal').val('');
      $('#hari').val('');
      $('#pukul').val('');
      $('#materi').val('');
      $('#persiapan_training').val('');
      $('#detail_isi_pesan').val('');
    }
  });

  $('#whatsappForm').on('submit', function(e) {
    e.preventDefault();
    const nomorPonsel = $('#nomor_ponsel').val();
    const pesan = $('#detail_isi_pesan').val();

    $.post('/sendWhatsApp', { nomor_ponsel: nomorPonsel, pesan: pesan }, function(response) {
      if (response.success) {
        alert('Pesan berhasil dikirim!');
        
        // Mengosongkan form setelah pesan terkirim
        $('#whatsappForm')[0].reset();  // Reset the form fields
        $('#id_lapor').val('');  // Reset the select option as well
      } else {
        alert('Gagal mengirim pesan.');
      }
    });
  });
</script>


</body>
</html>
